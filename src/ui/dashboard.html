<!DOCTYPE html>
<html>
<head>
  <title>PFAS DC RiskScope Dashboard</title>
  <style>
    body { font-family: Arial; margin: 30px; }
    textarea { width: 100%; height: 150px; }
    button { padding: 10px 20px; margin: 5px; }
    pre { background: #111; color: #0f0; padding: 10px; }
  </style>
</head>
<body>

<h2>PFAS Simulation Dashboard</h2>

<label>Latitude:</label>
<input id="lat" type="text"><br><br>

<label>Longitude:</label>
<input id="lon" type="text"><br><br>

<label>State:</label>
<input id="state" type="text"><br><br>

<label>Receiving Flow (MGD):</label>
<input id="receiving" type="text"><br><br>

<label>Discharge Flow (MGD):</label>
<input id="discharge" type="text"><br><br>

<label>PFAS Discharge JSON:</label>
<textarea id="pfas">{ "PFOA": 7.5, "PFOS": 6.2, "HFPO-DA": 5.0 }</textarea>

<br>
<button onclick="runSim()">Run Simulation</button>
<button onclick="downloadPDF()">Download PDF</button>

<h3>Simulation Output</h3>
<pre id="output"></pre>

<script>
async function runSim() {
    const payload = {
        chemicals: { concentrations_ppt: JSON.parse(document.getElementById("pfas").value) },
        environmental_factors: {
            receiving_water_flow_mgd: parseFloat(document.getElementById("receiving").value),
            groundwater_vulnerability_index: 0.5
        },
        data_center: {
            max_daily_water_withdrawal_mgd: parseFloat(document.getElementById("discharge").value),
            cooling_type: "closed_loop"
        }
    };

    const res = await fetch("/simulate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
    });

    document.getElementById("output").textContent =
        JSON.stringify(await res.json(), null, 2);
}

function downloadPDF() {
    window.location.href = "/export-pdf-simple";
}
</script>
</body>
</html>
